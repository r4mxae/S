<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Add PR - Savings Dashboard</title>
  <link rel="stylesheet" href="assets/css/style.css" />
</head>
<body>
  <div class="page" id="app">
    <aside class="sidebar" data-collapsed="false">
      <div class="sidebar__header">
        <div class="logo">ðŸ’ </div>
        <div>
          <div class="title">Savings</div>
          <div class="subtitle">Dashboard</div>
        </div>
        <button class="icon-btn" id="collapseBtn" aria-label="Toggle sidebar">â€¹</button>
      </div>
      <nav class="sidebar__nav">
        <a class="nav__item" href="index.html">Dashboard</a>
        <a class="nav__item active" href="add.html">Add PR</a>
      </nav>
      <div class="sidebar__footer">
        <label class="theme-toggle">
          <input type="checkbox" id="themeToggle" />
          <span class="slider"></span>
          <span class="label">Dark mode</span>
        </label>
      </div>
    </aside>

    <main class="content">
      <header class="content__header">
        <div>
          <p class="eyebrow">Data Entry</p>
          <h1>Add PR</h1>
          <p class="muted">Add negotiation details and immediately see budget and submission savings.</p>
        </div>
        <div class="header__actions">
          <a class="btn ghost" href="index.html">Back to Dashboard</a>
        </div>
      </header>

      <section class="panel form-panel">
        <form id="prForm" class="form">
          <div class="form__row">
            <label>PR Number <span class="required">*</span></label>
            <div class="input-group">
              <select id="prYear" required></select>
              <input id="prNumber" type="text" placeholder="000123" required pattern="\\d{6}" />
              <div class="prefix">PR-<span id="prYearPreview">2024</span>-</div>
            </div>
            <p class="help">Enter six digits; the prefix updates with the selected year.</p>
          </div>

          <div class="form__row">
            <label>Negotiation Number</label>
            <div class="input-group">
              <select id="negYear"></select>
              <input id="negNumber" type="text" placeholder="000123" pattern="\\d{6}" />
              <div class="prefix">GCAA-<span id="negYearPreview">2024</span>-</div>
            </div>
            <p class="help">Optional reference if a negotiation cycle exists.</p>
          </div>

          <div class="form__row">
            <label>PO Number</label>
            <div class="input-group">
              <select id="poYear"></select>
              <input id="poNumber" type="text" placeholder="000123" pattern="\\d{6}" />
              <div class="prefix">PO-<span id="poYearPreview">2024</span>-</div>
            </div>
            <p class="help">Leave blank if a PO was not created yet.</p>
          </div>

          <div class="form__row triple">
            <label>Approved Budget (AED) <span class="required">*</span></label>
            <input id="approvedBudget" type="number" min="0" step="0.01" required />

            <label>First Supplier Submission (AED) <span class="required">*</span></label>
            <input id="firstSubmission" type="number" min="0" step="0.01" required />

            <label>Final Negotiated Price (AED) <span class="required">*</span></label>
            <input id="finalPrice" type="number" min="0" step="0.01" required />
          </div>

          <div class="form__row inline">
            <label class="checkbox">
              <input type="checkbox" id="hasPO" />
              <span>PO Created</span>
            </label>
          </div>

          <div class="form__row savings-preview" id="savingsPreview">
            <div class="preview-box">
              <p class="eyebrow">Budget vs Final</p>
              <h3 id="budgetSavings">0%</h3>
              <p class="muted">Savings against approved budget</p>
            </div>
            <div class="preview-box">
              <p class="eyebrow">Submission vs Final</p>
              <h3 id="submissionSavings">0%</h3>
              <p class="muted">Savings against first submission</p>
            </div>
          </div>

          <div class="form__actions">
            <button type="reset" class="btn ghost">Reset</button>
            <button type="submit" class="btn primary">Save PR</button>
          </div>
        </form>
      </section>
    </main>
  </div>

  <script src="assets/js/utils.js"></script>
  <script src="assets/js/dataStore.js"></script>
  <script src="assets/js/theme.js"></script>
  <script src="assets/js/form.js"></script>
</body>
</html>
